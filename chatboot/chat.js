
// Banco inicial de conhecimento (100+ respostas, resumido aqui)
let defaultKnowledge = {
  
    "oi": "Oi! Que bom te ver por aqui üòÑ. Bem-vindo ao meu portf√≥lio!",
    "ol√°": "Ol√°! Fico feliz com a sua visita üòä. Explore meu portf√≥lio!",
    "hello": "Hello! Welcome to my portfolio üòé. Feel free to look around!",
    "tchau": "Tchau! Foi √≥timo conversar com voc√™ üëã. Volte sempre!",
    "adeus": "Adeus! Espero te ver de novo em breve üòâ.",
    "at√© logo": "At√© logo! Obrigado pela visita e volte sempre üòÑ.",
    "como vai": "Estou √≥timo, obrigado por perguntar! E voc√™, como est√°?",
    "tudo bem": "Tudo √≥timo por aqui! E voc√™, como est√° se sentindo hoje?",
    "nome": "Meu nome √© ChatBot Portfolio, prazer em te conhecer!",
    "portf√≥lio": "Voc√™ est√° vendo meu portf√≥lio online, cheio de projetos legais üíª.",
    "programa√ß√£o": "Ah, adoro programar! HTML, CSS, JS e Node.js s√£o meus favoritos üòé.",
    "c√≥digo": "Programar √© meu hobby favorito! üòÑ Adoro HTML, CSS, JS e Node.js.",
    "desenvolvimento": "Desenvolver √© incr√≠vel! Posso mostrar meus projetos em JS, HTML e CSS.",
    "help": "Precisa de ajuda? ü§î Voc√™ pode me perguntar coisas como: 'Oi', 'Portf√≥lio', 'Programa√ß√£o', 'Python', 'Contato'.",
    "javascript": "JavaScript √© super vers√°til! D√° para criar sites, apps e at√© servidores üòé.",
    "js": "JS √© incr√≠vel! Posso te mostrar muitas coisas legais que ele faz.",
    "html": "HTML √© a base de qualquer p√°gina web. Sem ele, nada funciona üòÖ.",
    "css": "CSS deixa tudo bonito e responsivo. Adoro brincar com cores e layouts üé®.",
    "node": "Node.js √© √≥timo para criar servidores e APIs usando JavaScript üöÄ.",
    "nodejs": "Node.js facilita muito o desenvolvimento backend com JS!",
    "express": "Express √© um framework de Node.js que agiliza a cria√ß√£o de servidores.",
    "python": "Python √© perfeito para scripts, automa√ß√£o e at√© intelig√™ncia artificial ü§ñ.",
    "github": "GitHub √© meu lugar favorito para versionamento e mostrar projetos üìÇ.",
    "git": "Git ajuda a controlar vers√µes de c√≥digo e colaborar com outros devs.",
    "linkedin": "Voc√™ pode me encontrar no LinkedIn! Vamos nos conectar üòâ.",
    "contato": "Quer me contatar? Meu email √© exemplo@teste.com ‚úâÔ∏è",
    "email": "Pode me escrever no email: exemplo@teste.com üìß",
    "projetos": "Tenho v√°rios projetos interessantes de sites, apps e chatbots üí°.",
    "trabalhos": "Quer ver meus trabalhos? Tenho sites, apps e chatbots para mostrar!",
    "idade": "N√£o tenho idade üòÖ, sou apenas um programa!",
    "clima": "Ainda n√£o sei informar o clima ‚òÅÔ∏è, mas posso aprender com voc√™!",
    "tempo": "N√£o consigo informar o tempo ainda, mas podemos conversar sobre programa√ß√£o üòÑ.",
    "hobbies": "Gosto de aprender coisas novas e bater papo com voc√™ üòé.",
    "passatempo": "Meu passatempo √© programar e conversar com pessoas legais como voc√™!",
    "ajuda": "Claro! Pergunte qualquer coisa, estou aqui para ajudar üòä.",
    "socorro": "N√£o se preocupe, estou aqui para te ajudar! ü§ù",
    "brincadeira": "Que tal uma piada? Por que o computador foi ao m√©dico? Porque pegou um v√≠rus! üòÇ",
    "piada": "Adoro piadas! Aqui vai uma: Por que o computador foi ao m√©dico? Porque pegou um v√≠rus! üòÜ",
    "cor favorita": "Adoro tons de azul e verde üíôüíö. E voc√™?",
    "cores": "Gosto de azul e verde, cores que transmitem calma e criatividade üåøüíô.",
    "desenho": "Arte digital √© incr√≠vel! Adoro criar em SVG e Canvas üé®.",
    "arte": "Criar arte digital √© divertido! Posso mostrar alguns exemplos.",
    "m√∫sica": "Ou√ßo muitas m√∫sicas, principalmente eletr√¥nica üéß.",
    "song": "Adoro ouvir m√∫sicas enquanto programo üòé.",
    "filme": "Gosto de fic√ß√£o cient√≠fica e a√ß√£o üé¨. Qual seu g√™nero favorito?",
    "cinema": "Cinema √© demais! Filmes de a√ß√£o e sci-fi s√£o meus preferidos.",
    "livro": "Sou f√£ de livros de tecnologia e fic√ß√£o cient√≠fica üìö.",
    "leitura": "Adoro ler sobre tecnologia e hist√≥rias futuristas!",
    "futebol": "N√£o jogo futebol, mas adoro acompanhar os campeonatos ‚öΩ.",
    "esporte": "Gosto de assistir esportes, especialmente futebol e e-sports üèÜ.",
    "comida": "Pizza e sushi s√£o meus favoritos üòã. E os seus?",
    "culin√°ria": "Adoro comidas variadas, principalmente pizza e sushi üç£üçï.",
    "viagem": "Adoro explorar o mundo, mesmo que seja virtual üåç.",
    "turismo": "Se pudesse, viajaria pelo mundo inteiro! üòÑ",
    "intelig√™ncia artificial": "Sou uma IA em aprendizado cont√≠nuo ü§ñ. Adoro conversar com voc√™!",
    "ia": "Intelig√™ncia artificial √© meu mundo! Aprendo com cada intera√ß√£o üòä",
    "aprendizado": "Quanto mais voc√™ me ensina, melhor eu fico üòé!",
    "aprender": "Aprender com voc√™ √© meu passatempo favorito üòÑ.",
    "tecnologia": "Tecnologia √© fascinante! Adoro ver como ela muda o mundo üåê.",
    "web": "Desenvolvimento web √© minha especialidade üíª. Posso te mostrar meus projetos!",
    "offline": "Posso funcionar completamente offline no navegador, sem depender da internet üòâ.",
    "local": "Mesmo offline, posso conversar e aprender com voc√™! üòé"
};

// ... continue com as demais 100+ respostas iniciais

// Carrega aprendizado do localStorage
let knowledge = JSON.parse(localStorage.getItem('knowledge')) || defaultKnowledge;

// Salva aprendizado
function saveKnowledge() {
    localStorage.setItem('knowledge', JSON.stringify(knowledge));
}

// Similaridade simples: verifica se alguma palavra-chave bate com a mensagem
function findResponse(msg) {
    msg = msg.toLowerCase().trim();
    // Comando help
    if (msg === "help") {
        return getHelpMessage();
    }
    for (let key in knowledge) {
        let keywords = key.split('|');
        for (let kw of keywords) {
            if (msg.includes(kw)) return knowledge[key];
        }
    }
    return null;
}

// Gera mensagem de help com algumas intera√ß√µes dispon√≠veis
function getHelpMessage() {
    let examples = [];
    let count = 0;
    for (let key in knowledge) {
        if (count >= 10) break; // mostrar no m√°ximo 10 exemplos
        let kw = key.split('|')[0]; // pega a primeira palavra-chave
        if (kw !== "help") { 
            examples.push(kw);
            count++;
        }
    }
    return "Voc√™ pode tentar algumas intera√ß√µes:\n- " + examples.join("\n- ");
}

// Adiciona mensagem ao chat
function addMessage(sender, text) {
    const messagesDiv = document.getElementById('messages');
    const div = document.createElement('div');
    div.classList.add('message', sender);
    div.textContent = text;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// Processa mensagem do usu√°rio
function processMessage(msg) {
    let response = findResponse(msg);
    if (response) {
        addMessage('bot', response);
    } else {
        let answer = prompt("N√£o sei responder. Por favor, me ensine:");
        if (answer && answer.trim() !== "") {
            knowledge[msg.toLowerCase()] = answer.trim();
            saveKnowledge();
            addMessage('bot', "Obrigado! Aprendi algo novo.");
        } else {
            addMessage('bot', "Ainda n√£o sei responder isso. Digite 'help' para ver exemplos.");
        }
    }
}

// Envia mensagem
function sendMessage() {
    const input = document.getElementById('input');
    const message = input.value.trim();
    if (!message) return;
    addMessage('user', message);
    input.value = '';
    processMessage(message);
}

// Event listeners
document.getElementById('sendBtn').addEventListener('click', sendMessage);
document.getElementById('input').addEventListener('keypress', function(e){
    if(e.key === 'Enter') sendMessage();
});
